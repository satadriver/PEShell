# PEShell

本程序是一个windows 32/64位加壳的例子，带有内存加载执行功能。

只能支持windows程序和console程序加壳，有限支持dll加壳（需结合源码手动实现函数导出）。

原理：
将被加壳程序压缩、加密，当作一个新segment("lpdata")插入到peunshell.exe，peunshell.exe运行时解密、解压缩该段，将文件释放出来、并内存加载、执行。

内存加载的主要步骤：将程序segment读入到内存中，完成文件地址和内存地址的映射；导入表函数填充；重定位；跳转入口点执行。

加壳程序peshell.exe，完成:1. 压缩加密被加密程序2. peunshell中新建一个名称为ldata的segment段，并将数据写入。

测试中发现只能运行一些小程序，比如几百kb、几MB的程序，大一些程序存在兼容问题，可能运行不起来。
